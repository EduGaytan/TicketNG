<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=58mm, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ticket</title>

	<style>
        /*------ RESETEO BÁSICO Y PÁGINA ------*/
	    * {
            font-family: 'Courier New', Courier, monospace;
            font-size: 13px;
            color: #000;
        }

	    @page {
        	margin: 2mm 0 0 0;
            size: 58mm auto;
	    }

	    body {
        	margin: 0;
            padding: 0 1mm;
            width: 56mm;
	    }

        /*------ LOGO ------*/
        .svg-container {
            width: 100%;
            text-align: center;
            margin-bottom: 5mm;
        }
        #logo {
            max-width: 80%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        /*------ INFORMACIÓN GENERAL DEL TICKET ------*/
	    .ticket-header, .ticket-footer, .totals-section, .items-section {
            text-align: center;
            margin-bottom: 3mm;
	    }
        .ticket-header p, .ticket-footer p {
            margin: 1mm 0;
            line-height: 1.2;
        }
        .info-line {
            display: flex;
            justify-content: space-between;
            margin: 1mm 0;
            padding: 0 2mm;
        }
        .info-line .label {
            font-weight: bold;
            text-align: left;
            padding-right: 5px;
        }
        .info-line .value {
            text-align: right;
        }

        /*------ TABLA DE ARTÍCULOS ------*/
	    .items-table {
	        width: 100%;
	        border-collapse: collapse;
            margin-top: 3mm;
            margin-bottom: 3mm;
	    }
	    .items-table th, .items-table td {
	        border: none;
	        padding: 1mm 0.5mm;
            vertical-align: top;
	    }
        .items-table thead th {
            font-weight: bold;
            border-bottom: 1px dashed #000;
            padding-bottom: 1.5mm;
            text-align: right;
        }

        /* Ajuste específico de anchos y alineación por columna (SIN DESCUENTO) */
        .items-table th.col-desc, .items-table td.col-desc {
            /* Más ancho para descripción ahora */
            width: 45%;
            text-align: left;
        }
        .items-table th.col-qty, .items-table td.col-qty {
            width: 10%;
            text-align: center;
        }
         .items-table th.col-price, .items-table td.col-price {
            /* Mantenemos o ajustamos ligeramente */
            width: 20%;
        }
        /* COLUMNA DESCUENTO ELIMINADA */
        .items-table th.col-subtotal, .items-table td.col-subtotal {
             /* Más ancho para subtotal */
            width: 25%;
        }

        .items-table tbody td {
             padding-top: 1mm;
        }

        /*------ SEPARADOR ------*/
        .separator {
            border-top: 1px dashed #000;
            margin: 3mm 0;
            height: 0;
            overflow: hidden;
        }

        /*------ TABLA DE TOTALES ------*/
		.totals-table {
            width: 100%;
	        border-collapse: collapse;
            margin-top: 3mm;
		}
        .totals-table td {
            padding: 1mm 2mm;
            border: none;
        }
        .totals-table td.label {
            text-align: right;
            font-weight: bold;
            width: 50%;
        }
        .totals-table td.value {
            text-align: right;
            width: 50%;
        }
        .totals-table tr.total-final td {
            font-weight: bold;
            font-size: 14px;
        }

        /*------ PIE DE TICKET ------*/
        .ticket-footer {
            margin-top: 5mm;
        }
         .ticket-footer p {
            font-size: 11px;
            line-height: 1.3;
         }
    </style>
</head>

<body>
   <script>
        // --- Obtener parámetros (SIN Descuento) ---
        const params = new URLSearchParams(window.location.search);
        var Ticket = params.has('Ticket') ? params.get('Ticket') : " ";
        var FechaHora = params.has('FechaHora') ? params.get('FechaHora') : " ";
        var Total = params.has('Total') ? params.get('Total') : "0";
        var FormaPago = params.has('FormaPago') ? params.get('FormaPago') : " ";
        var Recibido = params.has('Recibido') ? params.get('Recibido') : "0";
        var Cambio = params.has('Cambio') ? params.get('Cambio') : "0";
        var Descripción = params.has('Descripción') ? params.get('Descripción') : "No hay articulos";
        var Qty = params.has('Qty') ? params.get('Qty') : "0";
        var Precio = params.has('Precio') ? params.get('Precio') : "0";
        // var Descuento = params.has('Descuento') ? params.get('Descuento') : "0"; // ELIMINADO
        var Subtotal = params.has('Subtotal') ? params.get('Subtotal') : "0";

        // --- Convertir cadenas en arrays (SIN Descuento) ---
        Descripción = Descripción.split(" , ");
        Qty = Qty.split(" , ");
        Precio = Precio.split(" , ");
        // Descuento = Descuento.split(" , "); // ELIMINADO
        Subtotal = Subtotal.split(" , ");

        // --- Crear lista de resultados (SIN Descuento) ---
        var result = [];
        Descripción.forEach(function(value, id) {
            // Asegurarse que todos los arrays necesarios tengan la misma longitud
            // ELIMINADO: && Descuento[id] de la condición
            if (Descripción[id] && Qty[id] && Precio[id] && Subtotal[id]) {
                result[id] = {
                    Descrip: Descripción[id],
                    Cantidad: Qty[id],
                    Price: formatCurrency(parseFloat(Precio[id])),
                    // Desc: (parseFloat(Descuento[id]) * 100) + "%", // ELIMINADO
                    Subttl: formatCurrency(parseFloat(Subtotal[id]))
                };
            }
        });

        function formatCurrency(number) {
             if (isNaN(number)) return "$0.00";
            return "$" + number.toLocaleString('es-MX', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        Total = formatCurrency(parseFloat(Total));
        Recibido = formatCurrency(parseFloat(Recibido));
        Cambio = formatCurrency(parseFloat(Cambio));
        // --- Fin del código JavaScript de datos ---
    </script>

    <!-- Contenedor del SVG (Logo) -->
    <div class="svg-container">
        <!-- TU SVG COMPLETO ESTÁ AHORA AQUÍ -->
        <svg id="logo" version="1.0" xmlns="http://www.w3.org/2000/svg"
             width="100%" height="100%"
             viewBox="0 200 1280 180"
             preserveAspectRatio="xMidYMid meet">
            <!-- Primera path -->
            <path d="M0 0 C422.4 0 844.8 0 1280 0 C1280 59.4 1280 118.8 1280 180 C857.6 180 435.2 180 0 180 C0 120.6 0 61.2 0 0 Z " fill="#F9FCFE" transform="translate(0,0)"/>
            <!-- Segunda path -->
            <path d="M0 0 C0.75 0 1.51 0.01 2.28 0.01 C3.48 0.01 3.48 0.01 4.7 0 C7.41 0 10.12 0 12.83 0.01 C14.79 0.01 16.74 0.01 18.7 0.01 C24.12 0 29.55 0.01 34.97 0.01 C40.85 0.01 46.74 0.01 52.62 0.01 C62.95 0.01 73.27 0.01 83.6 0.01 C94.69 0.02 105.77 0.02 116.86 0.02 C117.56 0.02 118.26 0.02 118.98 0.02 C122.54 0.02 126.1 0.02 129.67 0.02 C155.5 0.02 181.32 0.02 207.15 0.03 C232.73 0.03 258.32 0.04 283.9 0.04 C284.7 0.04 285.49 0.04 286.31 0.04 C293.56 0.04 300.81 0.04 308.06 0.04 C326.09 0.04 344.12 0.04 362.14 0.04 C362.97 0.04 363.79 0.04 364.63 0.04 C404.59 0.04 444.55 0.05 484.51 0.06 C498.38 0.06 512.25 0.06 526.12 0.06 C526.98 0.06 527.84 0.06 528.73 0.06 C568.7 0.07 608.67 0.07 648.65 0.08 C651.24 0.08 653.83 0.08 656.43 0.08 C673.62 0.08 690.81 0.08 708.01 0.08 C742.22 0.08 776.43 0.09 810.64 0.09 C812.27 0.09 813.9 0.09 815.53 0.09 C888.89 0.1 962.26 0.11 1035.63 0.12 C1036.31 0.12 1037 0.12 1037.71 0.12 C1072.08 0.12 1106.44 0.13 1140.81 0.13 C1141.37 2.07 1141.37 2.07 1141.81 4.13 C1140.09 5.85 1137.91 5.26 1135.62 5.26 C1134.87 5.26 1134.12 5.26 1133.34 5.26 C1132.55 5.26 1131.75 5.26 1130.93 5.26 C1128.22 5.26 1125.51 5.26 1122.8 5.25 C1120.85 5.26 1118.9 5.26 1116.94 5.26 C1111.52 5.26 1106.1 5.26 1100.68 5.25 C1094.8 5.25 1088.93 5.25 1083.05 5.25 C1072.73 5.26 1062.41 5.26 1052.1 5.25 C1041.02 5.25 1029.94 5.24 1018.87 5.24 C1017.82 5.24 1017.82 5.24 1016.75 5.24 C1013.19 5.25 1009.63 5.25 1006.07 5.25 C980.26 5.25 954.46 5.24 928.65 5.24 C903.09 5.23 877.53 5.23 851.97 5.23 C850.78 5.23 850.78 5.23 849.56 5.23 C842.32 5.23 835.07 5.23 827.83 5.23 C809.82 5.23 791.81 5.22 773.79 5.22 C772.56 5.22 772.56 5.22 771.31 5.22 C731.38 5.22 691.46 5.21 651.54 5.21 C637.68 5.2 623.82 5.2 609.96 5.2 C608.67 5.2 608.67 5.2 607.36 5.2 C567.42 5.19 527.48 5.19 487.54 5.19 C484.95 5.19 482.36 5.19 479.77 5.19 C462.59 5.19 445.41 5.18 428.23 5.18 C394.05 5.18 359.87 5.18 325.69 5.17 C324.07 5.17 322.44 5.17 320.81 5.17 C247.51 5.17 174.2 5.16 100.9 5.15 C100.21 5.15 99.53 5.15 98.82 5.15 C64.48 5.14 30.15 5.14 -4.19 5.13 C-4.85 3.81 -5.51 2.49 -6.19 1.13 C-4.47 -0.59 -2.29 0.01 0 0 Z " fill="#AD1A05" transform="translate(74.19057984673418,148.8681988453027)"/>
            <!-- Tercera path y todas las demás... -->
            <path d="M0 0 C8.56 4.86 14.28 14.5 16.87 23.82 C19.96 37.47 19.48 53.48 12.32 65.82 C6.29 75.25 -0.86 80.52 -11.71 83.28 C-19.43 84.69 -27.09 85.03 -34.93 85.07 C-36.38 85.1 -36.38 85.1 -37.86 85.13 C-38.79 85.14 -39.73 85.14 -40.69 85.15 C-41.53 85.16 -42.37 85.17 -43.23 85.18 C-46.49 84.7 -48.12 83.93 -50.68 81.82 C-51.17 78.99 -51.32 76.74 -51.26 73.91 C-51.26 73.1 -51.26 72.3 -51.27 71.47 C-51.27 68.8 -51.23 66.14 -51.2 63.48 C-51.19 61.63 -51.19 59.78 -51.18 57.93 C-51.17 54.05 -51.15 50.17 -51.11 46.3 C-51.06 41.32 -51.03 36.35 -51.02 31.38 C-51 26.64 -50.98 21.9 -50.95 17.16 C-50.94 16.26 -50.94 15.35 -50.93 14.42 C-50.92 11.86 -50.89 9.29 -50.87 6.73 C-50.86 5.97 -50.86 5.21 -50.86 4.43 C-50.82 1.3 -50.67 -1.19 -49.68 -4.18 C-35.14 -9.03 -13.88 -6.12 0 0 Z " fill="#00205E" transform="translate(417.67578125,44.1796875)"/>
            <!-- ... y así sucesivamente hasta el final -->
            <path d="M0 0 C0.99 0 1.98 0 3 0 C5 5.68 6.99 11.36 8.98 17.03 C9.66 18.97 10.34 20.9 11.02 22.83 C11.99 25.61 12.97 28.38 13.94 31.15 C14.24 32.02 14.55 32.89 14.87 33.79 C17 39.89 17 39.89 17 41 C7.43 41 -2.14 41 -12 41 C-13.44 36.69 -11.72 33.51 -10.25 29.39 C-9.96 28.56 -9.67 27.72 -9.38 26.85 C-8.45 24.17 -7.5 21.49 -6.56 18.81 C-5.93 17 -5.3 15.18 -4.67 13.36 C-3.12 8.9 -1.56 4.45 0 0 Z " fill="#FAFDFF" transform="translate(481,54)"/>
        </svg>
    </div>
	
    <!-- El resto del ticket continúa aquí -->	
	<!-- Datos de la empresa (Encabezado) -->
	<div class="ticket-header">
	    <p><strong>NOMBRE DE TU EMPRESA</strong></p>
	    <p>RFC: GAOE6603281X3</p>
	    <p>Av. Hidalgo #8 Moroleón, Gto.</p>
	    <p>Tel: 445 458 2720</p>
	    <p>WhatsApp: 445 100 9780</p>
	    <p>www.novedadesgaytan.com.mx</p>
	</div>

	<!-- Número de ticket y Fecha/Hora -->
    <div class="info-line">
        <span class="label"># Ticket:</span>
        <span class="value" id="Ticket_id"></span>
    </div>
    <div class="info-line">
        <span class="label">Fecha y Hora:</span>
        <span class="value" id="FechaHora_id"></span>
    </div>


	<!-- Detalles de la venta (Tabla de artículos SIN Descuento) -->
	<div class="items-section">
	    <table class="items-table">
	        <thead>
	            <tr>
                    <!-- Encabezado de columna Descuento ELIMINADO -->
			        <th class="col-desc">Descripción</th>
			        <th class="col-qty">Qty</th>
	                <th class="col-price">P.U.</th>
	                <th class="col-subtotal">Subtotal</th>
	            </tr>
            </thead>
	        <tbody id="tablaBody">
                <!-- Las filas se insertarán aquí por JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Separador -->
    <div class="separator"></div>

    <!-- Sección de Totales -->
    <div class="totals-section">
        <table class="totals-table">
            <tr class="total-final">
		        <td class="label">Total:</td>
		        <td class="value" id="Total"></td>
		    </tr>
		    <tr>
		        <td class="label">Forma pago:</td>
		        <td class="value" id="FormaPago"></td>
		    </tr>
		    <tr>
		        <td class="label">Recibido:</td>
		        <td class="value" id="Recibido"></td>
		    </tr>
		    <tr>
		        <td class="label">Cambio:</td>
		        <td class="value" id="Cambio"></td>
		    </tr>
		</table>
    </div>

    <!-- Mensajes Finales (Pie de ticket) -->
    <div class="ticket-footer">
        <p>******** Gracias por su compra ********</p>
        <p>Necesario ticket para cambio, límite 30 días.</p>
    </div>

    <!-- Scripts para poblar datos y para imprimir -->
    <script>
        // --- Poblar los elementos HTML con los datos ---
        document.getElementById("Ticket_id").textContent = Ticket;
        document.getElementById("FechaHora_id").textContent = FechaHora;

        var tablaBody = document.getElementById("tablaBody");
        result.forEach(function(row) {
            var newRow = document.createElement("tr");
            // Celdas SIN la columna Descuento
            newRow.innerHTML = `
                <td class="col-desc">${row.Descrip}</td>
                <td class="col-qty">${row.Cantidad}</td>
                <td class="col-price">${row.Price}</td>
                <td class="col-subtotal">${row.Subttl}</td>
            `;
            tablaBody.appendChild(newRow);
        });

        document.getElementById("Total").textContent = Total;
        document.getElementById("Recibido").textContent = Recibido;
        document.getElementById("FormaPago").textContent = FormaPago;
        document.getElementById("Cambio").textContent = Cambio;

        // --- Script de impresión y cierre ---
        window.onload = function() {
            setTimeout(function() {
                window.print();
                setTimeout(function() {
                    // window.close();
                    console.log("Intento de cierre de ventana.");
                }, 1500);
            }, 500);
        }
    </script>

</body>
</html>
